#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

echo "üöÄ –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞"

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "$(dirname "$0")/.."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è .env —Ñ–∞–π–ª–∞
if [ ! -f .env ]; then
    echo "‚ö†Ô∏è  –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ API –∫–ª—é—á–∏"
    exit 1
fi

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
export $(cat .env | grep -v '^#' | xargs)

# –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
echo "üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞:"
echo "1. –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è + —Å–∏–Ω—Ç–µ–∑)"
echo "2. –¢–æ–ª—å–∫–æ —Å–∏–Ω—Ç–µ–∑ (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é)"
echo "3. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ"
echo "4. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é"

read -p "–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é (1-4): " choice

case $choice in
    1)
        echo "üîÑ –ó–∞–ø—É—Å–∫–∞—é –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å..."
        python synthesize/main.py
        ;;
    2)
        echo "üîÑ –ó–∞–ø—É—Å–∫–∞—é —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ç–µ–∑..."
        python synthesize/main.py --skip-recognition --skip-generation
        ;;
    3)
        echo "üîÑ –ü—Ä–æ–ø—É—Å–∫–∞—é —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ..."
        python synthesize/main.py --skip-recognition
        ;;
    4)
        echo "üîÑ –ü—Ä–æ–ø—É—Å–∫–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é..."
        python synthesize/main.py --skip-generation
        ;;
    *)
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ó–∞–ø—É—Å–∫–∞—é –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å..."
        python synthesize/main.py
        ;;
esac

echo "‚úÖ –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω" 