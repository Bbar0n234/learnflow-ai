# Соглашения по разработке

**Данные соглашения являются лаконичными и должны строго соблюдаться. В процессе разработки могут дополняться.**

<mvp-status>
## Статус MVP и совместимость

Поскольку проект находится на стадии MVP и не имеет пользователей, **обратная совместимость НЕ требуется**. Критические изменения допустимы и ожидаемы в процессе быстрой итерации.
</mvp-status>

<dependency-management>
## Управление зависимостями

В проекте используется **UV** для управления зависимостями с разделением по сервисам через пакеты и группы (prod, test, dev). Подробности см. в `docs/specs/uv_dependency_management.md`.

### Критическое правило: НЕ редактировать вручную
**НИКОГДА не редактируйте зависимости в `pyproject.toml` вручную**. Всегда используйте команды UV:

```bash
# Добавить зависимость
uv add <package> --package <service> --group <group>

# Удалить зависимость  
uv remove <package> --package <service> --group <group>

# Синхронизация после изменений
uv sync
```

Названия сервисов: `learnflow` (API сервис), `bot` (Telegram бот сервис)
</dependency-management>

<repository-structure>
## Структура репозитория

### Нумерация задач в backlog

Для организации и навигации по задачам в `docs/backlog/` используется **префиксная нумерация**:

#### Правила нумерации:
- **Хронологический порядок**: нумерация начинается с `01-` для самой первой реализованной задачи
- **Единая нумерация**: одна и та же задача имеет идентичный номер в `current/` и `archive/`
- **Формат**: `XX-TYPE-description/` где XX = порядковый номер, TYPE = тип задачи (FEAT, SEC, BUG и т.д.)

#### Жизненный цикл задачи:
1. **Планирование**: задача создается в `current/XX-FEAT-YYY/` с планами реализации
2. **Реализация**: планы заменяются на Post Implementation Summary в `current/XX-FEAT-YYY/impl/`
3. **Архивирование**: планы реализации перемещаются в `archive/XX-FEAT-YYY/`

#### Примеры:
```
docs/backlog/current/
├── 02-SEC-guardrails/impl/                  # Завершенная задача
├── 06-FEAT-prompt-config-service/impl/      # Завершенная задача  
├── 09-FEAT-markdown-pdf-export/             # Планируемая задача
└── 10-FEAT-dynamic-prompt-generation/       # Планируемая задача

docs/backlog/archive/
├── 02-SEC-guardrails/                       # Архивированные планы
├── 06-FEAT-prompt-config-service/           # Архивированные планы
└── misc/                                    # Standalone файлы
```

#### Навигация:
- **Актуальные задачи** (высокие номера) отображаются внизу списка current/
- **Старые задачи** (низкие номера) отображаются вверху
- **Завершенные задачи** содержат папку `impl/` с Post Implementation Summary
</repository-structure>

<naming-conventions>
## Соглашения по именованию

*[Заполняется в процессе разработки]*
</naming-conventions>

<error-handling>
## Обработка ошибок

*[Заполняется в процессе разработки]*
</error-handling>