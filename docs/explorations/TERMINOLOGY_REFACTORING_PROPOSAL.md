# Предложение по рефакторингу терминологии LearnFlow AI

## Введение

В рамках эволюции системы LearnFlow AI от узконаправленного инструмента подготовки к экзаменам по криптографии к универсальной платформе генерации образовательного контента, необходим комплексный рефакторинг терминологии. Система теперь способна работать с различными предметными областями, уровнями обучения и форматами образовательного контента.

## Ключевые проблемы текущей терминологии

### 1. Устаревшие понятия "экзамен/exam"
- **Проблема**: Терминология ориентирована на экзамены, хотя система теперь универсальна
- **Примеры**: "экзаменационный вопрос", "exam materials", "подготовка к экзамену"
- **Влияние**: Сужает восприятие системы до инструмента только для экзаменов

### 2. Ограниченное понятие "вопрос/question" на входе
- **Проблема**: На вход может подаваться не только вопрос, но и тема, задание, набросок
- **Примеры**: "Отправьте экзаменационный вопрос", "educational questions"
- **Влияние**: Ограничивает понимание возможностей системы пользователями

### 3. Узкое понятие "gap questions"
- **Проблема**: Вопросы могут быть не только для анализа пробелов, но и для самооценки, закрепления материала
- **Примеры**: "gap questions", "gap analysis questions"
- **Влияние**: Не отражает полный спектр генерируемых вопросов

### 4. Неполное описание работы с конспектами
- **Проблема**: Текущие формулировки подразумевают только изображения рукописных конспектов
- **Реальность**: Система поддерживает как изображения, так и текстовый ввод конспектов
- **Влияние**: Пользователи не знают о возможности загрузки текстовых конспектов
- **Дополнительно**: Конспекты можно загрузить не только в начале, но и позже в процессе работы

## Предлагаемая новая терминология

### 1. Замена терминологии экзаменов

| Старый термин | Новый термин | Обоснование |
|---------------|--------------|-------------|
| экзаменационный вопрос | учебный запрос / образовательная тема | Более широкое понятие |
| exam materials | учебные материалы / образовательный контент | Универсальность применения |
| exam preparation | создание учебных материалов | Расширенный контекст |
| экзаменационные материалы | образовательные ресурсы | Подходит для любых целей |

### 2. Замена входной терминологии

| Старый термин | Новый термин | Обоснование |
|---------------|--------------|-------------|
| входной вопрос | входной запрос / учебная тема | Может быть не только вопросом |
| educational question | учебный контент / образовательный запрос | Более гибкое определение |
| вопрос для изучения | тема для изучения / учебное задание | Расширенное понимание |

### 3. Замена терминологии генерируемых вопросов

| Старый термин | Новый термин | Обоснование |
|---------------|--------------|-------------|
| gap questions | контрольные вопросы / вопросы для проверки знаний | Универсальное назначение |
| gap analysis | анализ усвоения материала | Шире чем просто пробелы |
| дополнительные вопросы | вопросы для закрепления | Более точное назначение |

### 4. Уточнение терминологии конспектов

| Старый термин | Новый термин | Обоснование |
|---------------|--------------|-------------|
| рукописные конспекты | учебные конспекты / материалы с занятий | Включает и текстовые, и рукописные |
| фотографии конспектов | конспекты (фото или текст) | Подчеркивает оба варианта |
| распознавание рукописных | обработка конспектов | Универсальный процесс |
| handwritten notes | study notes / lecture materials | Более широкое понятие |

## Конкретные изменения по файлам

### 1. Пользовательский интерфейс (bot/main.py)

**Строки 154-167 (start_command):**
```python
# Старое:
"Я помогу вам подготовить материалы для экзаменов"
"Текстовый экзаменационный вопрос"
"Вопрос с фотографиями ваших конспектов"
"Просто фотографии конспектов (я помогу их обработать)"

# Новое:
"Я помогу создать персонализированные учебные материалы"
"Учебную тему или задание для изучения"
"Тему с вашими конспектами (фото или текст)"
"Просто конспекты для обработки"
```

**Строки 192-203 (help_command):**
```python
# Старое:
"Отправьте экзаменационный вопрос"
"Можете добавить фото ваших конспектов"
"Дождитесь генерации материала и вопросов"
"Работа с изображениями:"
"Отправьте до 10 фотографий конспектов"
"Фото будут распознаны и использованы в материале"

# Новое:
"Отправьте учебную тему или задание"
"Можете добавить ваши конспекты (текст или фото)"
"Дождитесь генерации материала и контрольных вопросов"
"Работа с конспектами:"
"Отправьте конспекты в виде текста или до 10 фотографий"
"Конспекты будут обработаны и интегрированы в материал"
```

**Строка 320:**
```python
# Старое:
"Отправьте еще фото или текст с экзаменационным вопросом"

# Новое:
"Отправьте еще фото или текст с учебной темой"
```

**Строка 375:**
```python
# Старое:
"Пожалуйста, отправьте экзаменационный вопрос вместе с фотографиями"

# Новое:
"Пожалуйста, отправьте учебную тему или задание вместе с фотографиями"
```

### 2. Документация (CLAUDE.md, README.md)

**CLAUDE.md строка 9:**
```markdown
# Старое:
- **FastAPI service** (`learnflow/`) - REST API for processing exam materials

# Новое:
- **FastAPI service** (`learnflow/`) - REST API for processing educational content
```

**CLAUDE.md строки 118-119:**
```markdown
# Старое:
5. **generating_questions** - Creates gap analysis questions with HITL review
6. **answer_question** - Generates detailed answers for gap questions

# Новое:
5. **generating_questions** - Creates knowledge assessment questions with HITL review
6. **answer_question** - Generates detailed answers for assessment questions
```

**CLAUDE.md строка 182:**
```markdown
# Старое:
- `gen_question_system_prompt` - Gap question generation

# Новое:
- `gen_question_system_prompt` - Assessment question generation
```

**README.md строка 10:**
```markdown
# Старое:
Преобразует учебные вопросы и рукописные заметки в комплексные учебные материалы с вопросами для анализа пробелов

# Новое:
Преобразует учебные темы и рукописные заметки в комплексные образовательные материалы с вопросами для проверки усвоения
```

### 3. Обработчики и сервисы

**bot/handlers/export_handlers.py строка 209:**
```python
# Старое:
"Создайте сессию, отправив вопрос для изучения"

# Новое:
"Создайте сессию, отправив тему для изучения"
```

**bot/handlers/hitl_settings.py строка 87:**
```python
# Старое:
"generating_questions": "Генерация вопросов"

# Новое:
"generating_questions": "Генерация контрольных вопросов"
```

### 3. Узел обработки конспектов (learnflow/nodes/recognition.py)

**Строки 127-133 (HITL запрос конспектов):**
```python
# Старое:
"Для улучшения качества материала рекомендуется добавить ваши конспекты"
"Отправьте фотографии рукописных конспектов"
"Вставьте текст уже распознанных/печатных конспектов"

# Новое:
"Для улучшения качества материала можете добавить конспекты с занятий"
"Отправьте фото конспектов или вставьте текст"
"Материалы принимаются в любом формате"
# Примечание: упоминание о возможности пропустить остается
```

**Строки 2, 44-48 (docstrings):**
```python
# Старое:
"Узел распознавания рукописных конспектов"
"Распознавания изображений рукописных конспектов"

# Новое:
"Узел обработки учебных конспектов"
"Обработка конспектов в любом формате (изображения или текст)"
```

### 4. Основная логика (learnflow/)

**learnflow/core/graph_manager.py строки 32, 646, 655, 661, 666, 677, 679:**
```python
# Старое:
"generating_questions": "Генерация и правка gap questions"
"Сохраняет gap questions"
"skipping gap questions save"

# Новое:
"generating_questions": "Генерация и правка контрольных вопросов"
"Сохраняет контрольные вопросы"
"skipping assessment questions save"
```

**learnflow/core/graph.py строка 34:**
```python
# Старое:
6. edit_material -> generating_questions (генерация gap questions с HITL)

# Новое:
6. edit_material -> generating_questions (генерация контрольных вопросов с HITL)
```

**learnflow/nodes/answers.py строки 2, 20, 45:**
```python
# Старое:
Узел генерации ответов на gap questions
Узел для генерации ответов на отдельные gap questions
Генерирует ответ на один gap question

# Новое:
Узел генерации ответов на контрольные вопросы
Узел для генерации ответов на отдельные контрольные вопросы
Генерирует ответ на один контрольный вопрос
```

**learnflow/nodes/questions.py строка 24:**
```python
# Старое:
Узел генерации gap questions с HITL циклом

# Новое:
Узел генерации контрольных вопросов с HITL циклом
```

### 5. Конфигурация промптов (prompt-config-service/)

**initial_data.yaml:**
- Строки 161-163, 185-187: Заменить "exam preparation" на "educational content preparation"
- Строки 281-283, 305-307: Заменить "simulate exam" на "knowledge assessment"
- Строки 246, 270, 294: Обновить описания для более широкого контекста

### 6. Бизнес-документация (docs/)

**docs/business_model.md:**
- Строка 6: Заменить "система подготовки к экзаменам" на "система создания образовательного контента"
- Строка 11: Обновить описание для универсального контекста
- Строки 19-21: Расширить описание преимуществ

**docs/overview.md:**
- Строка 6: Уточнить описание анализа пробелов
- Строки 57, 113, 137: Обновить терминологию в технической документации

## Важные замечания по реализации

### Работа с конспектами - ключевые принципы

1. **Гибкость ввода**: Система поддерживает как изображения, так и текстовый ввод конспектов
2. **Отложенная загрузка**: Конспекты можно добавить не только в начале, но и позже в процессе работы
3. **Необязательность**: Конспекты улучшают качество, но не являются обязательными

### Рекомендуемые формулировки для пользователей

При общении с пользователем важно:
- **Не акцентировать** детали реализации (OCR, распознавание и т.д.)
- **Подчеркивать** универсальность (текст или фото)
- **Информировать** о возможности добавить конспекты позже
- **Избегать** технических терминов

Примеры хороших формулировок:
- ✅ "Можете добавить конспекты с занятий (текст или фото)"
- ✅ "Материалы принимаются в любом удобном формате"
- ✅ "Конспекты можно будет добавить позже при необходимости"

Примеры плохих формулировок:
- ❌ "Загрузите фотографии рукописных конспектов для OCR"
- ❌ "Система распознает только рукописный текст"
- ❌ "Необходимо загрузить конспекты сейчас"

## Дополнительные рекомендации

### 1. Создание глоссария терминов
Рекомендуется создать файл `docs/GLOSSARY.md` с официальными терминами системы:
- Учебный запрос (Educational Request)
- Контрольные вопросы (Assessment Questions)
- Образовательный контент (Educational Content)
- Анализ усвоения (Knowledge Assessment)

### 2. Обновление переменных в коде
После утверждения терминологии потребуется рефакторинг переменных:
- `exam_question` → `educational_request`
- `gap_questions` → `assessment_questions`
- `exam_materials` → `educational_content`

### 3. Миграция существующих данных
Если система уже используется, потребуется:
- Обновление метаданных сессий
- Информирование пользователей об изменениях
- Обновление документации API

## Приоритет изменений

1. **Высокий приоритет** (пользовательский интерфейс):
   - bot/main.py - сообщения пользователям
   - bot/handlers/* - интерфейсные строки
   - README.md - публичная документация

2. **Средний приоритет** (внутренняя логика):
   - learnflow/core/* - описания и комментарии
   - learnflow/nodes/* - docstrings
   - configs/prompts.yaml - системные промпты

3. **Низкий приоритет** (техническая документация):
   - docs/architecture/*
   - docs/backlog/*
   - Комментарии в коде

## Ожидаемый результат

После рефакторинга система будет позиционироваться как универсальная платформа создания образовательного контента, что:
- Расширит целевую аудиторию
- Улучшит понимание возможностей системы
- Сделает интерфейс более интуитивным
- Подготовит базу для дальнейшего развития функционала

## Следующие шаги

1. Обсудить и утвердить предложенную терминологию
2. Создать глоссарий терминов
3. Поэтапно внедрить изменения согласно приоритетам
4. Обновить тесты и валидацию
5. Информировать пользователей об изменениях