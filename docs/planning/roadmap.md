# Roadmap

| Milestone | Период | Цели | Ключевые инициативы | Статус |
| --- | --- | --- | --- | --- |
| Pre‑OSS Release | Qx | Сквозной поток через React SPA; замена GitHub → локальные артефакты; базовые правки с подтверждением; подготовка к релизу | INIT‑UI‑001 (FEAT‑UI‑103), FEAT‑AI‑201, REL‑OSS‑001 | Active |
| OSS Launch | Qx | Публичный релиз с документацией и лицензией | REL‑OSS‑001 | Planned |
| UI V1 | Qx | Real‑time обновления и более удобный UI | FEAT‑UI‑104, FEAT‑UI‑105 | Planned |
| Post‑OSS: Telegram‑first | Qx+1 | Основной UX в Telegram; экспорт в заметки | TG‑UX‑001, EXP‑NOTE‑001 | Future |

См. инициативы в `docs/backlog/` и ADR для детальной декомпозиции.

## Как читать названия инициатив (INIT‑UI‑001)

- Тип:
  - INIT — большая инициатива (несколько фич под одной целью)
  - FEAT — отдельная фича/итерация внутри инициативы
  - REL — задачи релиза (документация, лицензия и пр.)
- Область: UI, AI, OSS, TG (Telegram), EXP (экспорт) — помогает быстро понять, о чём задача
- Номер: просто порядковый, чтобы ссылаться (001, 103 и т. д.)

Примеры:
- INIT‑UI‑001 — базовая платформа UI + артефакты
- FEAT‑UI‑103 — интеграция LearnFlow с локальными артефактами (часть INIT‑UI‑001)
- REL‑OSS‑001 — подготовка к публикации исходников

Как пользоваться:
- При добавлении работы создавай файл в `docs/backlog/current/` с таким же названием.
- Внутри укажи: цель, план, DoD (критерии готовности), статус.
- После завершения перемести файл в `docs/backlog/archive/` и добавь краткое резюме в `docs/changelog.md`.

## Активные инициативы

### INIT‑UI‑001 — React SPA Platform & Artifacts
- Статус: Active; Milestone: Pre‑OSS Release → UI V1
- Объём: локальный Artifacts Service, React SPA, интеграция LearnFlow
- Выполнено: FEAT‑UI‑101 (база Artifacts Service), FEAT‑UI‑102 (базовый просмотр Markdown) — см. архив
- Чартер: `docs/backlog/current/INIT-UI-001-react-spa-platform/README.md`
- В работе/запланировано:
  - FEAT‑UI‑103 — Интеграция LearnFlow: замена GitHub → локальные артефакты (`docs/backlog/current/FEAT-UI-103-learnflow-integration/README.md`)
  - FEAT‑UI‑104 — Real‑time обновления (WebSocket) (`docs/backlog/current/FEAT-UI-104-realtime-updates.md`)
  - FEAT‑UI‑105 — Продвинутый UI (редактор, dnd, аннотации) (`docs/backlog/current/FEAT-UI-105-advanced-ui.md`)

### FEAT‑AI‑201 — Правки с подтверждением (HITL)
- Когда: после этапа синтеза (готов `synthesized_material`, собранный из конспектов и сгенерированного текста).
- Что делает пользователь: даёт обратную связь — где дополнить, сократить, переписать или уточнить. Может выделить место (строка/абзац/пара абзацев) или описать его.
- Что делает агент: вносит точечные правки в указанном фрагменте, предлагает дифф; пользователь подтверждает или отклоняет.
- Главная сложность: спроектировать инструмент так, чтобы LLM надёжно попадал в нужный фрагмент и давал качественный дифф.

План:
- Инструмент `EditTool` (для агента):
  - Вход: `{thread_id, file_path, locator (span|anchor+instruction), intent (add|reduce|rewrite|clarify), style_guidelines?}`
  - Выход: `diff` (unified), `suggestion` (чистый текст правки), `rationale` (кратко зачем изменено)
  - Требования: идемпотентность, строгие границы правки, отказ от «тихих» переписываний вне span
- Контракт правки (упрощённо): `RewriteSegment {path, locator, intent, suggestion, diff}`
- Узел HITL после синтеза: принимает обратную связь, запрашивает `EditTool`, показывает дифф в UI, применяет только после «Принять» и обновляет артефакты
- Web UI: минимальный review — подсветка изменений и кнопки «Принять/Отклонить», поле для короткого комментария; полноценный редактор — в FEAT‑UI‑105

Готово, если:
- подтверждённые правки записываются в `data/artifacts/{thread_id}/...` и видны в UI;
- последующие шаги графа учитывают обновления;
- некорректные локаторы/диффы корректно обрабатываются (ошибка/повторное уточнение).

### REL‑OSS‑001 — Подготовка к публикации кода и лицензирование
- Задача: привести репозиторий к публичному релизу (лицензия + доки)
- План:
  - Лицензия с запретом монетизации (это не OSI‑open source, а «source‑available»). Варианты: PolyForm Noncommercial, Prosperity, BUSL‑1.1, Apache‑2.0 + Commons Clause. Выбрать и зафиксировать в ADR.
  - Оформить базовые файлы: `LICENSE`, `README`, `CONTRIBUTING`, `CODE_OF_CONDUCT`, `SECURITY`, шаблоны Issue/PR
  - Проверить запуск по инструкции (Docker Compose), актуализировать `env.example` и `changelog`
- Готово, если: лицензия и ADR в репо, инструкция по запуску работает «с нуля»

## Запланированные инициативы (после OSS)

### TG‑UX‑001 — Telegram‑first UX
- Цель: перенести основной пользовательский сценарий в Telegram; Web UI оставить как просмотр/редактор
- План: deep link из бота в thread, управление сессиями, HITL‑подтверждения внутри чата, предпросмотр Markdown
- Метрики: MAU/DAU бота, % завершённых сессий без веба

### EXP‑NOTE‑001 — Экспорт в заметки/сервисы
- Цель: удобный экспорт материалов
- Варианты: Obsidian (локальная папка/зеркало), Notion API, Markdown zip, WebDAV; модуль экспортёров в Artifacts Service
- DoD: хотя бы два экспортёра, настройка из UI/бота

## Риски и зависимости
- Большие файлы (OCR/рендер) могут замедлять обработку — следить и оптимизировать
- Real‑time: нужен простой и стабильный формат событий WS (`/ws/{thread_id}`)
- Лицензия с «некоммерческим» ограничением — оформить как source‑available и явно описать условия

## Ссылки
- Обзор: `docs/overview.md`
- Vision: `docs/planning/vision.md`
- Инициативы: `docs/backlog/current/`


