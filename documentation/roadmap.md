---

### **Концепция проекта: "AI-Powered Exam Prep Environment"**

**Основная идея:** Создать сервис, который помогает студентам готовиться к экзаменам, трансформируя их сырые материалы (конспекты, учебники) и экзаменационные вопросы в структурированный, системный и интерактивный учебный контент. Система эволюционирует от простого генератора ответов до полноценной автономной среды для обучения.

---

### **I. Ключевые функциональные возможности и сценарии использования**

1.  **Базовая генерация (Ядро системы):**
    *   **Вход:** Экзаменационный вопрос.
    *   **Процесс:** LLM генерирует подробный, системный и легкоусвояемый материал для подготовки, объясняя тему с нуля.
    *   **Выход:** Структурированный текст, покрывающий тему вопроса.

2.  **Обогащение контента (Content Augmentation):**
    *   **Сценарий А: "Фундамент от LLM + Подкрепление из источников" (RAG).** Система генерирует базовый материал, а затем находит и интегрирует в него подтверждающие цитаты, формулы и примеры из предоставленных пользователем источников (конспектов, учебников), обязательно указывая ссылки на источник.
    *   **Сценарий Б: "Каркас из источника + Обогащение от LLM" (Enrichment).** Система анализирует загруженный конспект, находит в нем логические пробелы, неполные определения, а затем использует LLM для "наращивания" недостающей информации, добавления объяснений и аналогий.

3.  **Интерактивное обучение (Interactive Learning Loop):**
    *   После генерации основного материала система задает пользователю 5 проверочных вопросов для выявления пробелов в понимании.
    *   На основе ответов и дальнейшего диалога с пользователем система итеративно до-генерирует дополнительный, уточняющий материал, закрывая конкретные "слепые зоны" студента.

---

### **II. Техническая архитектура и компоненты**

Проект строится на модульной архитектуре с четким разделением ответственностей для независимой разработки и масштабирования.

1.  **Модуль Генерации (Generation Module):**
    *   **Ответственность:** Создание качественного текста на основе входящих данных.
    *   **Вход:** Экзаменационный вопрос и структурированный контекст от Модуля Извлечения.
    *   **Технологии:** Продвинутый промпт-инжиниринг, работа с API LLM (OpenAI, Anthropic, etc.).

2.  **Модуль Извлечения Данных (Retrieval Module) / "Структурно-Осознанный RAG":**
    *   **Ответственность:** Индексация, хранение и поиск релевантной информации в документах пользователя и общей базе.
    *   **Компоненты и процесс:**
        *   **Предобработка документов:** При загрузке учебника система проводит глубокий анализ:
            *   **Извлечение метаданных:** Дисциплина, теги, темы.
            *   **Парсинг структурного оглавления (ToC):** Создание древовидной/графовой структуры документа (Глава -> Секция -> Подсекция) с диапазонами страниц.
            *   **Гибридная индексация:**
                *   **Лексический индекс (BM25):** Для быстрого поиска по ключевым словам на макро-уровне (поиск релевантных книг).
                *   **Семантический индекс (Векторы):** Для поиска по смыслу. Чанки обогащаются метаданными из структуры (название главы/секции), что повышает точность поиска.
        *   **Хранилища данных:**
            *   **Объектное хранилище (S3/MinIO):** Для оригиналов файлов.
            *   **Векторная БД (ChromaDB, Pinecone):** Для хранения эмбеддингов.
            *   **Графовая БД (Neo4j):** Для хранения структуры оглавлений и связей между концепциями.
            *   **Реляционная БД (PostgreSQL):** Для данных пользователей, метаданных файлов.
        *   **"Контракт" с Модулем Генерации:** Модуль возвращает стандартизированный JSON с найденными кусками контекста, их источником, номером страницы и скором релевантности.

3.  **Агент-Оркестратор (Agent Core):**
    *   **Ответственность:** Управление всем процессом, принятие решений о последовательности действий.
    *   **Логика (по шаблону ReAct - Reason & Act):**
        1.  Получает задачу от пользователя.
        2.  **Шаг 1 (Поиск книги):** Использует BM25 для определения наиболее релевантных учебников в базе.
        3.  **Шаг 2 (Поиск главы):** Анализирует структурированное оглавление найденных книг с помощью LLM для нахождения нужных глав/секций.
        4.  **Шаг 3 (Поиск факта):** Выполняет таргетированный векторный поиск внутри найденных секций для извлечения конкретных цитат и фактов.
        5.  **Шаг 4 (Синтез ответа):** Передает всю собранную информацию в Модуль Генерации.
    *   **Технологии:** Фреймворки LangChain или LlamaIndex.

4.  **Инфраструктура:**
    *   **Frontend:** Веб-приложение (React/Vue).
    *   **Backend:** API на FastAPI (Python).
    *   **Фоновые задачи (Celery/RQ):** Для асинхронной и ресурсоемкой обработки документов.

---

### **III. Пошаговый план развития (Roadmap)**

Проект развивается итеративно, с рабочим прототипом на каждом этапе.

*   **Этап 1: "Прототип одной сессии" (Stateless Tool)**
    *   **Цель:** Доказать жизнеспособность основной идеи.
    *   **Функционал:** В рамках одной сессии пользователь загружает 1-2 документа, которые обрабатываются "на лету" во временном хранилище. Система генерирует один ответ, подкрепленный этими документами. Нет регистрации и сохранения состояния.
    *   **Фокус:** Отладка связки "Модуль Извлечения (наивный) + Модуль Генерации".

*   **Этап 2: "Персистентный рабочий стол студента" (Persistent Workspace)**
    *   **Цель:** Сделать сервис удобным для долгосрочного использования.
    *   **Функционал:** Внедрение пользовательских аккаунтов, долгосрочного хранения файлов и обработанных данных. Фоновая обработка документов. Личный кабинет со списком материалов.

*   **Этап 3: "Интегрированная среда подготовки" (Integrated Prep Environment)**
    *   **Цель:** Превратить инструмент в полноценную среду обучения.
    *   **Функционал:** Создание сущности "Экзамен" или "Предмет", куда можно загрузить все материалы и список вопросов. Пакетная генерация материалов. Отслеживание прогресса. Внедрение разделения на **публичные** (общие для всех учебники) и **приватные** (личные конспекты) библиотеки знаний.

*   **Этап 4: "Автономный агент-исследователь и Продуктивизация"**
    *   **Цель:** Максимальная автономия и готовность к выходу на рынок.
    *   **Функционал:** Агент получает возможность самостоятельно искать учебники в интернете по названию. Развитый UI/UX. Интеграция с платежными системами, разработка тарифных планов.

---

### **IV. Ключевые риски и моменты для особого внимания**

1.  **Качество обработки документов (Garbage In, Garbage Out):** Надежность парсинга PDF (таблицы, формулы, колонки) критически важна. Требуются качественные инструменты (`unstructured.io`, `PyMuPDF`).
2.  **Стратегия чанкинга:** Необходимо использовать продвинутые методы (семантический, рекурсивный чанкинг), а не наивную нарезку по символам.
3.  **Оценка качества (Evaluation):** Разработка системы метрик (например, с помощью RAGAs) для оценки точности поиска, верности источникам и качества генерации.
4.  **Стоимость и производительность:** Оптимизация вызовов LLM (использование более дешевых моделей для рутинных задач), кэширование, асинхронная обработка.
5.  **Юридические аспекты:** Тщательная проработка Пользовательского соглашения в части авторских прав на загружаемые учебники. Система должна позиционироваться как инструмент для личного использования.

Этот документ является живым и будет эволюционировать вместе с проектом. Он очерчивает амбициозное, но реалистичное видение мощного и полезного продукта.